<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><chapter lang="ru" id="chapter1_tool_description">
  <title>Описание инструментария</title>
  <para>В данной главе содержится описание пользовательского интерфейса генератора отчетов. </para>
  <para>Для того чтобы войти в подсистему создания отчетов, необходимо в главном меню приложения перейти к пункту меню <guimenu>Отчеты</guimenu> −&gt; <guimenu>Отчеты</guimenu>. Перед Вами откроется окно, представленное на рисунке ниже.</para>
  <figure>
    <title>Окно управления отчетами системы</title>
    <mediaobject>
      <imageobject>
        <imagedata align="center" fileref="img/reports.png" contentwidth="50%" width="50%"/>
      </imageobject>
    </mediaobject>
  </figure>
  <para>В верхней области вкладки расположена панель с кнопками</para>
  <itemizedlist>
    <listitem>
      <para><guibutton>Создать</guibutton> − возможность создания нового отчета.</para>
    </listitem>
    <listitem>
      <para><guibutton>Изменить</guibutton> − предоставляет возможность редактировать уже существующий в системе отчет.</para>
    </listitem>
    <listitem>
      <para><guibutton>Удалить</guibutton> − по нажатию на эту кнопку происходит вызов окна подтверждения операции удаление отчета.</para>
      <figure>
        <title>Окно подтверждения удаления</title>
        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/removeConfirmation.png" contentwidth="70%"/>
          </imageobject>
        </mediaobject>
      </figure>
    </listitem>
    <listitem>
      <para><guibutton>Копировать</guibutton> − полностью копирует существующий отчет.</para>
    </listitem>
    <listitem>
      <para><guibutton>Импортировать</guibutton> − предоставляет возможность  загрузить сохраненный ранее отчет. </para>
      <figure>
        <title>Импорт отчета</title>
        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="img/importReport.png" contentwidth="90%"/>
          </imageobject>
        </mediaobject>
      </figure>
      <warning>
        <para>При импорте новой версии отчета старая удаляется.</para>
      </warning>
    </listitem>
    <listitem>
      <para><guibutton>Экспортировать</guibutton> − предоставляет возможность сохранять выбранный в списке отчет.</para>
    </listitem>
    <listitem>
      <para><guibutton>Выполнить</guibutton> − по нажатию на эту кнопку происходит запуск отчета.</para>
    </listitem>
    <listitem>
      <para><guibutton>Добавить в набор</guibutton> − добавляет отчет в набор.</para>
    </listitem>
  </itemizedlist>
  <para>В нижней области вкладки располагается таблица с колонками <guilabel>Группа</guilabel>, <guilabel>Имя отчета</guilabel> и <guilabel>Код отчета</guilabel>, содержащая уже созданные в системе отчеты.</para>
  <para>Остановимся подробнее на описании экрана редактора отчета. Перейти в него можно по нажатию на кнопку <guibutton>Создать</guibutton> или на кнопку <guibutton>Изменить</guibutton>.</para>
  <para>Экран редактора отчета содержит в себе следующие вкладки:</para>
  <itemizedlist>
    <listitem>
      <para>Параметры отчета</para>
    </listitem>
    <listitem>
      <para>Параметры и форматы</para>
    </listitem>
    <listitem>
      <para>Шаблоны</para>
    </listitem>
    <listitem>
      <para>Роли и экраны</para>
    </listitem>
    <listitem>
      <para>Локализация</para>
    </listitem>
  </itemizedlist>
  <para>В нижней области окна расположена панель  с кнопками</para>
  <itemizedlist>
    <listitem>
      <para><guibutton>ОК и Закрыть</guibutton></para>
    </listitem>
    <listitem>
      <para><guibutton>ОК</guibutton></para>
    </listitem>
    <listitem>
      <para><guibutton>Сохранить и запустить</guibutton></para>
    </listitem>
    <listitem>
      <para><guibutton>Отмена</guibutton></para>
    </listitem>
  </itemizedlist>
  <figure>
    <title>Окно редактора отчета</title>
    <mediaobject>
      <imageobject>
        <imagedata align="center" fileref="img/reportEditor_reportParameters.png"/>
      </imageobject>
    </mediaobject>
  </figure>
  <section>
    <title>Вкладка Параметры отчета</title>
    <para>На этой вкладке содержатся основные параметры отчета. </para>
    <itemizedlist>
      <listitem>
        <para><guilabel>Имя отчета</guilabel>. Это поле является обязательным для заполнения. Здесь необходимо ввести имя отчета. </para>
        <tip>
          <title>Подсказка</title>
          <para>Есть возможность локализовать имя на вкладке <guilabel>Локализация</guilabel>.</para>
        </tip>
      </listitem>
      <listitem>
        <para><guilabel>Основной шаблон</guilabel> также является обязательным компонентом любого отчета. В выпадающем списке можно выбрать один из существующих шаблонов. По кнопке <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/download.png"/>
            </imageobject>
          </inlinemediaobject> можно сохранить файл выбранного шаблона. Загрузить новый файл шаблона можно по кнопке <inlinemediaobject><imageobject>
              <imagedata fileref="img/upload.png"/>
            </imageobject>. </inlinemediaobject> Кнопка   <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/view.png"/>
            </imageobject>
          </inlinemediaobject> позволяет отредактировать выбранный шаблон. По кнопке <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/create.png"/>
            </imageobject>
          </inlinemediaobject> можно создать новый шаблон. Также создать шаблон можно по кнопке <guibutton>Создать</guibutton> на вкладке <guilabel>Шаблоны</guilabel>.</para>
      </listitem>
      <listitem>
        <para><guilabel>Группа</guilabel> предоставляет собой список выбора. Служит для группирования отчетов по каким-либо признакам. Поле является обязательным для заполнения.</para>
        <figure>
          <title>Список выбора группы</title>
          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="img/reporting_ui_7.png" contentwidth="40%"/>
            </imageobject>
          </mediaobject>
        </figure>
      </listitem>
      <listitem>
        <para><guilabel>Системный код</guilabel>. В это поле целесообразно вводить символьный код отчета в том случае, если название отчета будет использоваться при программировании.</para>
      </listitem>
      <listitem>
        <para><guilabel>Полосы отчета</guilabel>. По умолчанию для каждого отчета уже существует родительская полоса отчета <code>Root</code>. Для того чтобы создать новую полосу отчета, необходимо выделить родительскую полосу и нажать на кнопку <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/create.png"/>
            </imageobject>
          </inlinemediaobject>. На панели <guilabel>Свойства полосы</guilabel> находятся поля для редактирования атрибутов выделенной полосы. Для удаления существующей полосы отчета нужно нажать на кнопку  <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/remove.png"/>
            </imageobject>
          </inlinemediaobject>. Полосы отчета можно перемещать друг относительно друга с помощью кнопок  <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/up.png"/>
            </imageobject>
          </inlinemediaobject> и <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/down.png"/>
            </imageobject>
          </inlinemediaobject>.</para>
        <para>Для того, чтобы создать набор данных для полосы, необходимо выделить нужную полосу и нажать на кнопку <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/create.png"/>
            </imageobject>
          </inlinemediaobject> на панели <guilabel>Свойства полосы</guilabel>.</para>
        <para>После нажатия на кнопку <guibutton>Создать</guibutton> откроется окно, представленное на рисунке.</para>
        <para>Для полосы необходимо задать имя полосы в поле <guilabel>Имя</guilabel>, а также выбрать ориентацию полосы из выпадающего списка выбора <guilabel>Ориентация</guilabel>.</para>
        <figure>
          <title>Поле выбора ориентации полосы</title>
          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="img/reporting_ui_16.png" contentwidth="50%"/>
            </imageobject>
          </mediaobject>
        </figure>
        <para>Чтобы создать источник данных для полосы, нужно нажать на кнопку <guibutton>Создать</guibutton>. Для одной полосы можно создать несколько источников данных. После того как источник данных для полосы был создан, нужно выделить его в таблице источников данных. После этого имя источника и тип источника отобразятся в панели справа. Тип источника данных можно изменить с помощью выпадающего списка выбора <guilabel>Тип</guilabel>.</para>
        <figure>
          <title>Список выбора типа источника данных</title>
          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="img/reporting_ui_17.png" contentwidth="40%"/>
            </imageobject>
          </mediaobject>
        </figure>
        <warning>
          <para>Имена полос, источников данных и извлекаемых параметров должны содержать только латинские буквы, цифры или символ подчеркивания.</para>
        </warning>
        <para>Если в качестве типа источника данных был выбран <userinput>SQL</userinput> или <userinput>JPQL</userinput>, в поле <guilabel>Текст</guilabel> необходимо вписать текст запроса. При этом при написании запроса <userinput>JPQL</userinput> предоставляется возможность выбирать имя сущности, из которой делается выборка, а также названия полей сущности. Делается это с помощью комбинации клавиш <keycombo>
            <keycap>CTRL</keycap>
            <keycap>SPACE</keycap>
          </keycombo>. После нажатия данной комбинации на экране появляется список выбора, в котором пользователю предлагается выбрать одну из сущностей системы. Чтобы автозавершение сработало для полей сущности, нужно после алиаса сущности поставить точку и затем нажать <keycombo>
            <keycap>CTRL</keycap>
            <keycap>SPACE</keycap>
          </keycombo>. </para>
        <figure>
          <title>Автозавершение имен объектов в окне редактора запроса</title>
          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="img/reporting_ui_18.png" contentwidth="90%"/>
            </imageobject>
          </mediaobject>
        </figure>
        <para>Если в качестве типа был выбран <userinput>Groovy</userinput>, то в поле <guilabel>Текст</guilabel> нужно вписать скрипт, возвращающий данные.</para>
        <para>Если в  качестве типа был выбран тип <userinput>Связанная сущность</userinput> или <userinput>Группа связанных сущностей</userinput>, то вместо поля <guilabel>Текст</guilabel> будет отображено поле <guilabel>Имя параметра для связанной сущности</guilabel> или <guilabel>Имя параметра для списка сущностей</guilabel> соответственно. В этих полях нужно ввести имя параметра, который был определен на панели <guilabel>Параметры</guilabel> главного окна редактора отчета.</para>
      </listitem>
    </itemizedlist>
  </section>
  <section>
    <title>Вкладка Параметры и форматы</title>
    <figure>
      <title>Вкладка Параметры и форматы</title>
      <mediaobject>
        <imageobject>
          <imagedata align="center" fileref="img/reportEditor_parameters&amp;formats.png" contentwidth="50%"/>
        </imageobject>
      </mediaobject>
    </figure>
    <variablelist>
      <varlistentry>
        <term>Панель Параметры</term>
        <listitem>
          <para>Параметр создается с помощью кнопки <guibutton>Создать</guibutton>. После нажатия на кнопку на экране появится окно, представленное на рисунке.</para>
          <figure>
            <title>Окно редактора параметров отчета</title>
            <mediaobject>
              <imageobject>
                <imagedata align="center" fileref="img/parametersEditor.png" contentwidth="80%"/>
              </imageobject>
            </mediaobject>
          </figure>
          <para>В окне редактора параметров существуют следующие поля:</para>
          <itemizedlist>
            <listitem>
              <para><guilabel>Имя параметра</guilabel>. Это имя, которое отображается на экране ввода параметров.  Поле является обязательным для заполнения.</para>
              <tip>
                <title>Подсказка</title>
                <para>Есть возможность локализовать имя на вкладке <guilabel>Локализация</guilabel>.</para>
              </tip>
            </listitem>
            <listitem>
              <para><guilabel>Алиас параметра</guilabel>. Это название параметра, которое используется источниками данных. Поле является обязательным для заполнения.</para>
            </listitem>
            <listitem>
              <para><guilabel>Тип параметра</guilabel> представляет собой выпадающий список, в котором предлагается выбрать одно из значений. Поле является обязательным для заполнения.</para>
              <figure>
                <title>Список выбора типа параметра</title>
                <mediaobject>
                  <imageobject>
                    <imagedata align="center" fileref="img/parameterTypes.png" contentwidth="40%"/>
                  </imageobject>
                </mediaobject>
              </figure>
            </listitem>
            <listitem>
              <para>Параметр можно сделать обязательным для заполнения с помощью установки флажка  <guilabel>Обязательный параметр?</guilabel>.</para>
            </listitem>
            <listitem>
              <para>Если в качестве типа параметра был выбран <userinput>Объект</userinput> или <userinput>Список объектов,</userinput> поле <guilabel>Сущность</guilabel> становится доступным. Данное поле представляет собой выпадающий список, в котором есть возможность выбрать сущность из списка доступных сущностей, существующих в системе.</para>
              <figure>
                <title>Список выбора сущности</title>
                <mediaobject>
                  <imageobject>
                    <imagedata align="center" fileref="img/reporting_ui_12.png" contentwidth="50%"/>
                  </imageobject>
                </mediaobject>
              </figure>
            </listitem>
            <listitem>
              <para>Если в качестве типа параметра был выбран тип <userinput>Перечисление</userinput>, поле <guilabel>Перечисление</guilabel> становится доступным. Данное поле представляет собой выпадающий список, в котором есть возможность выбрать перечисление из списка доступных перечислений, существующих в системе.</para>
              <figure>
                <title>Список выбора перечисления</title>
                <mediaobject>
                  <imageobject>
                    <imagedata align="center" fileref="img/reporting_ui_13.png" contentwidth="40%"/>
                  </imageobject>
                </mediaobject>
              </figure>
            </listitem>
            <listitem>
              <para>Если в качестве типа параметра был выбран <userinput>Объект</userinput> или <userinput>Список объектов,</userinput> поле <guilabel>Экран выбора сущности</guilabel> становится доступным. Данное поле представляет собой выпадающий список, в котором есть возможность выбрать экран из списка доступных экранов, существующих в системе.<figure>
                  <title>Список выбора экрана сущности</title>
                  <mediaobject>
                    <imageobject>
                      <imagedata align="center" fileref="img/reporting_ui_14.png" contentwidth="40%"/>
                    </imageobject>
                  </mediaobject>
                </figure> </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Панель Форматы значений</term>
        <listitem>
          <para>Для создания формата для выходного значения отчета нажмите на кнопку <guibutton>Создать.</guibutton> Для удаления и изменения существующего формата нажмите на кнопки <guibutton>Удалить</guibutton> и <guibutton>Изменить</guibutton> соответственно.</para>
          <para>После нажатия на кнопку <guibutton>Создать</guibutton> на экране откроется диалоговое окно, представленное на рисунке.</para>
          <figure>
            <title>Окно создания формата выходного параметра</title>
            <mediaobject>
              <imageobject>
                <imagedata align="center" fileref="img/valueFormat.png" contentwidth="80%"/>
              </imageobject>
            </mediaobject>
          </figure>
          <para>В окне <guilabel>Формат для значений</guilabel> необходимо ввести имя параметра в поле <guilabel>Имя выходного параметра</guilabel>. Имя параметра должно быть полным, имя должно начинаться от пути от корня. Например, <code>Test.name</code>, <code>Test</code> − имя полосы, <code>name</code> − имя параметра. </para>
          <para>Далее необходимо выбрать строку форматирования из выпадающего списка <guilabel>Строка форматирования</guilabel>.</para>
          <figure>
            <title>Список выбора строки форматирования</title>
            <mediaobject>
              <imageobject>
                <imagedata align="center" fileref="img/reporting_ui_20.png" contentwidth="40%"/>
              </imageobject>
            </mediaobject>
          </figure>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Вкладка Шаблоны</title>
    <para><firstterm role="bold">Шаблон</firstterm> является обязательным компонентом любого отчета. Создать шаблон можно по кнопке <guibutton>Создать</guibutton>. После этого откроется окно, представленное на рисунке.</para>
    <figure>
      <title>Окно редактора шаблона</title>
      <mediaobject>
        <imageobject>
          <imagedata align="center" fileref="img/templateEditor.png" contentwidth="80%"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>В данном окне существуют следующие поля:</para>
    <itemizedlist>
      <listitem>
        <para><guilabel>Код шаблона</guilabel> - по сути является его идентификатором. Используется при программировании, чтобы указать, какой шаблон нужно использовапть. <guilabel>Код шаблона</guilabel> является обязательным для заполнения. По умолчанию имеет значение <userinput>DEFAULT</userinput>. </para>
      </listitem>
      <listitem>
        <para><guilabel>Имя файла</guilabel> содержит имя файла шаблона, заполняется автоматически после его загрузки.</para>
      </listitem>
      <listitem>
        <para><guilabel>Тип вывода</guilabel> представляет собой список выбора. Является обязательным для заполнения.</para>
        <figure>
          <title>Список выбора типа вывода отчета</title>
          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="img/templateEditor_outputType.png" contentwidth="50%"/>
            </imageobject>
          </mediaobject>
        </figure>
      </listitem>
      <listitem>
        <para><guilabel>Файл шаблона</guilabel> можно загрузить по кнопке <guibutton>Загрузить</guibutton>.</para>
      </listitem>
      <listitem>
        <para><guilabel>Имя выходного файла</guilabel> содержит имя результирующего файла с отчетом.</para>
      </listitem>
      <listitem>
        <para>Флажок  <guilabel>Определен классом</guilabel> необходимо установить для отчета, определяемого классом.</para>
      </listitem>
      <listitem>
        <para>Поле <guilabel>Имя класса</guilabel> становится доступным после того, как был установлен флажок  <guilabel>Определен классом</guilabel>. В это поле необходимо ввести пусть к классу, который будет определять отчет.</para>
      </listitem>
    </itemizedlist>
    <para>Если существует несколько шаблонов на один отчет, есть возможность сделать один из них главным. Для этого необходимо выделить этот шаблон в таблице и нажать на кнопку <guibutton>Сделать главным.</guibutton> Главный шаблон используется по-умолчанию, когда мы запускаем отчет на выполнение в приложении. Программно можно запускать отчет с любым шаблоном.</para>
  </section>
  <section>
    <title>Вкладка Роли и экраны</title>
    <para>На вкладке <guilabel>Роли и экраны</guilabel> можно привязать отчет к экранам и\или ролям пользователей. Вид данной вкладки представлен на рисунке ниже.</para>
    <figure>
      <title>Вкладка Роли и экраны</title>
      <mediaobject>
        <imageobject>
          <imagedata align="center" fileref="img/reportEditor_roles&amp;screens.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Для добавления ролей, которым будет доступен отчет выберите  существующие роли в выпадающем списке и нажмите кнопку <guibutton>Добавить</guibutton>. </para>
    <para>Аналогичным образом задаются экраны, с которых можно будет вызывать отчет.</para>
  </section>
  <section>
    <title>Вкладка Локализация</title>
    <para>На вкладке <guilabel>Локализация</guilabel> можно задать локализованное значение названия отчета. </para>
    <figure>
      <title>Вкладка Локализация</title>
      <mediaobject>
        <imageobject>
          <imagedata align="center" fileref="img/reportEditor_localization.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>Для того чтобы это сделать, нужно в поле <guilabel>Строки локализации</guilabel> ввести локализованное значение следующего формата: </para>
    <para><code>&lt;название локали&gt;=&lt;название отчета на языке локали&gt;</code></para>
  </section>
</chapter>
